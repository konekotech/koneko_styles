%こねこ。のテンプレート（ver 2.3）
%Copyright © 2021-2022 こねこ。 All Rights Reserved.
%情報系の設定
%%%%%%%%%%%%%%%%%%%%%%%%触るな%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}
%\usepackage{jlisting}
\usepackage{tcolorbox}
\usepackage{moreverb}

\directlua{
function getFileName(path)
local lastSlash = path:match(".-[/\\]([^/\\]-)$")
tex.sprint(lastSlash or path)
end
}
\newcommand{\getfilename}[1]{\directlua{getFileName("\luaescapestring{#1}")}}

\renewcommand{\lstlistingname}{\sffamily コード}

\newtcbox{\code}[1][]{
  colback=gray!10!white,
  colframe=gray!20!white,
  boxrule=1pt,
  left=0mm,right=0mm,top=0mm,bottom=0mm,
  box align=base,
  nobeforeafter,
  fontupper=\ttfamily
}
\lstset{ %
  breaklines=true,
  backgroundcolor=\color{white},
  basicstyle=\linespread{0.8}\ttfamily\footnotesize,%\footnotesize,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  breaklines=false,
  captionpos=t,
  %commentstyle={\it},
  %numbers=left,
  numberstyle=\ttfamily,
  keywordstyle={\bfseries},
  %stringstyle=\color[rgb]{0.2,0.7,0.4},
  %frame=lines,
  %caption={\ttfamily\bfseries\getfilename{\lstname}},
  %title={\ttfamily\bfseries\getfilename{\lstname}},
  columns=flexible,
  extendedchars=true,
  xleftmargin=0.8cm,
  %inputpathを変えると，読むソースコードの場所を指定できる
  %inputpath=src
}

\usepackage{keystroke}
\newcommand{\srcmem}[1]{\filepath{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%